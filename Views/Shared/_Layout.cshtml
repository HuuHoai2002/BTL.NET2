@*
  @author: Nghiêm Hữu Hoài
*@

@using Microsoft.AspNetCore.Http
@using BTL.NET2.Utils
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>@ViewData["Title"] - BTL.NET2 Nhóm 9</title>
  <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
  <link rel="stylesheet" href="~/css/reset.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/css/base.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/css/main.css" asp-append-version="true" />
</head>

<body>
  <header class="app-header">
    <div class="app-header-wrapper">
      <div class="app-header-left">
        <a asp-area="" asp-controller="Home" asp-action="Index" class="app-header-logo">
          <svg width="83px" height="32px" viewBox="0 0 65 24" fill="none">
            <g clip-path="url(#logo-red_svg__clip0)">
              <path
                d="M52.192.211A11.913 11.913 0 0 0 40.48 9.853a8.61 8.61 0 0 0-.536-.633 8.962 8.962 0 0 0-2.586-1.916 8.686 8.686 0 0 0-3.212-.87L37.23.083h-6.294l-5.307 11.05c-.124.248-.248.496-.337.744a8.469 8.469 0 0 0-.807-1.362 8.856 8.856 0 0 0-3.534-2.909L24.6.084H13.384l-2.167 5.642h4.36l-3.211 6.683h4.902c.412-.003.82.076 1.201.234.367.15.704.367.993.64.286.275.52.599.692.956.177.362.28.756.306 1.159a2.882 2.882 0 0 1-.306 1.141c-.175.352-.41.67-.692.944-.29.27-.626.487-.993.637a3.07 3.07 0 0 1-1.201.249c-1.441 0-2.636-.662-3.584-1.986l-.44-.568-.27.265-3.212 3.016a10.295 10.295 0 0 0 3.296 3.61A7.573 7.573 0 0 0 17.277 24a8.573 8.573 0 0 0 2.978-.521 9.233 9.233 0 0 0 2.569-1.427 8.498 8.498 0 0 0 1.943-2.167c.232-.369.436-.755.61-1.154.421.933.996 1.789 1.7 2.531a8.86 8.86 0 0 0 2.654 1.914A8.737 8.737 0 0 0 33.01 24h.945a8.611 8.611 0 0 0 3.244-.824 8.9 8.9 0 0 0 2.656-1.913 9.207 9.207 0 0 0 1.792-2.73c.079-.192.15-.385.218-.581A11.933 11.933 0 0 0 64.12 12.06 11.88 11.88 0 0 0 52.192.21zM36.395 16.443c-.162.37-.392.707-.678.992-.336.331-.74.585-1.184.745-.273.102-.56.161-.851.176a3.12 3.12 0 0 1-1.462-.248 3.457 3.457 0 0 1-1.015-.67 3.025 3.025 0 0 1-.94-2.177c-.01-.441.075-.88.248-1.285.16-.38.395-.723.692-1.008.296-.283.64-.51 1.015-.67a3.15 3.15 0 0 1 2.308-.072c.446.16.851.413 1.19.744.278.28.502.61.66.973a3.148 3.148 0 0 1 .017 2.505v-.005zm22.178-1.696a7.002 7.002 0 0 1-1.47 2.152 7.077 7.077 0 0 1-2.64 1.63 6.205 6.205 0 0 1-1.737.358 6.848 6.848 0 0 1-3.227-.53 7.528 7.528 0 0 1-2.201-1.458 6.605 6.605 0 0 1-2.053-4.85 6.685 6.685 0 0 1 .549-2.66 6.613 6.613 0 0 1 1.519-2.191 7.532 7.532 0 0 1 2.201-1.46 6.838 6.838 0 0 1 3.227-.528 6.155 6.155 0 0 1 1.737.357c.986.343 1.883.9 2.628 1.63a6.843 6.843 0 0 1 1.467 2.192 6.64 6.64 0 0 1 .548 2.66 6.553 6.553 0 0 1-.548 2.699z"
                fill="#ED1B2F"></path>
              <path
                d="M55.396 11.402l-2.112-1.214-2.112-1.21a.7.7 0 0 0-1.037.6v4.847a.7.7 0 0 0 1.047.603l2.112-1.214 2.112-1.21a.69.69 0 0 0-.01-1.202zM3.569 5.679h-1.46V1.137H.979A.978.978 0 0 1 0 .159V0h5.679l.652 1.137H3.57v4.542z"
                fill="#fff"></path>
              <path
                d="M6.642 0a.613.613 0 0 1 .578.407l1.372 3.812c.025.08.065.122.112.122s.077-.042.114-.122l1.358-3.8A.637.637 0 0 1 10.78 0h1.112l-2.02 4.981a1.35 1.35 0 0 1-.404.561 1.24 1.24 0 0 1-.765.201 1.159 1.159 0 0 1-1.176-.762L5.518 0h1.124z"
                fill="#fff"></path>
            </g>
            <defs>
              <clipPath id="logo-red_svg__clip0">
                <path fill="#fff" d="M0 0h64.11v24H0z"></path>
              </clipPath>
            </defs>
          </svg>
        </a>
        <div class="app-header-content">
          <div class="content-list">
            <a asp-area="" asp-controller="Home" asp-action="Index" class="content-link content-active">Trang Chủ</a>
            <a asp-area="" asp-controller="Movies" asp-action="Index" class="content-link">Phim Chiếu Rạp</a>
            <a asp-area="" asp-controller="Series" asp-action="Index" class="content-link">Phim Bộ</a>
            @{
              Authentication auth = new Authentication();
              if (auth.IsAdmin(HttpContextAccessor.HttpContext))
              {
                <a asp-area="" asp-controller="Dashboard" asp-action="Index" class="content-link">Quản Trị</a>
              }
            }
          </div>
        </div>
      </div>
      <div class="app-header-right">
        <form action="/Search" class="app-header-search">
          <input type="text" name="keyword" class="app-search-input" placeholder="Bạn muốn xem gì hôm nay?" required />
          <button type="submit" class="header-btn-search">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="none" viewBox="0 0 24 24"
              stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </button>
        </form>
        <div class="app-header-users">
          @{
            string email = HttpContextAccessor.HttpContext.Session.GetString("email");
            string name = HttpContextAccessor.HttpContext.Session.GetString("username");
            string id = HttpContextAccessor.HttpContext.Session.GetString("userid");
            if (email != null)
            {
              <div class='users'>
                <svg width='30' height='30' viewBox='0 0 30 30' fill='none'>
                  <path
                  d='M15 0a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15zm0 18.75c8.288 0 15 3.356 15 7.5V30H0v-3.75c0-4.144 6.713-7.5 15-7.5z'
                  fill='#fff' fill-opacity='0.87'></path>
                </svg>
                <div class='users-content'>
                  <div class='users-info'>
                    Xin chào , <span>@name.Split(" ").Last().ToString()</span>
                  </div>
                  <div class='list-action'>
                    <a href="/User?id=@id&show_info=true" class='action-item'>
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                      fill="currentColor">
                        <path
                        d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8 0-1.168.258-2.275.709-3.276.154.09.308.182.456.276.396.25.791.5 1.286.688.494.187 1.088.312 1.879.312.792 0 1.386-.125 1.881-.313s.891-.437 1.287-.687.792-.5 1.287-.688c.494-.187 1.088-.312 1.88-.312s1.386.125 1.88.313c.495.187.891.437 1.287.687s.792.5 1.287.688c.178.067.374.122.581.171.191.682.3 1.398.3 2.141 0 4.411-3.589 8-8 8z">
                        </path>
                        <circle cx="8.5" cy="12.5" r="1.5"></circle>
                        <circle cx="15.5" cy="12.5" r="1.5"></circle>
                      </svg>
                      Trang cá nhân
                    </a>
                    <a asp-action="Index" asp-controller="Settings" class='action-item'>
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                      stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round"
                        d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      </svg>
                      Cài đặt
                    </a>
                    <a asp-action="Logout" asp-controller="Auth" class='action-item'>
                      <svg xmlns='http://www.w3.org/2000/svg' width='16px' height='16px' viewBox='0 0 20 20'
                      fill='currentColor'>
                        <path fillRule='evenodd'
                        d='M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z'
                        clipRule='evenodd' />
                      </svg>
                      Đăng xuất
                    </a>
                  </div>
                </div>
              </div>
            }
            else
            {
              <a asp-action="Login" asp-controller="Auth" class="app-header-signin">Đăng Nhập</a>
            }
          }
        </div>
      </div>
    </div>
  </header>
  <div class="main-app">
    @RenderBody()
  </div>

  <footer class="border-top footer text-muted" style="margin-top: 40px;">
    <div class="app-container">
      &copy; 2022 - BTL.NET2
    </div>
  </footer>
  <script src="~/lib/jquery/dist/jquery.min.js"></script>
  <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const pathName = window.location.pathname;

    const links = document.querySelectorAll(".content-link");

    links.forEach((link) => {
      if (link.getAttribute("href") === pathName) {
        link.classList.add("content-link-active");
      }
    });

    console.log(pathName)
  </script>
  @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
